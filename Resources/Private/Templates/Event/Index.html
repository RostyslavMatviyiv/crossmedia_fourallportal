{namespace core=TYPO3\CMS\Core\ViewHelpers}
<f:layout name="Backend"/>

<f:section name="docheader-buttons"></f:section>

<f:section name="module-headline"></f:section>

<f:section name="Content">

    <f:flashMessages/>

    <div class="row-fluid">
        <f:form action="index" addQueryString="1" class="form form-inline" id="filter-form">
            <fieldset class="filter form-group pull-right">
                <label>Status: <f:form.select name="status" options="{eventStatusOptions}" value="{status}" class="form-control" additionalAttributes="{onchange: 'document.getElementById(\'filter-form\').submit();'}" /></label>
                <f:form.textfield name="search" type="search" class="filter-search form-control" placeholder="Search" value="{search}"/>
                <f:form.submit value="Show" class="btn btn-primary" />
            </fieldset>
        </f:form>
        <strong>Events, {status}: </strong> {events -> f:count()}
    </div>

    <div class="headerRow ui-helper-clearfix">
        <div class="typo3-extensionmanager-headerRowLeft">
        </div>
        <div class="typo3-extensionmanager-headerRowRight">
        </div>
    </div>

    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>ID</th>
            <th>Created</th>
            <th>Updated</th>
            <th>Module</th>
            <th>Status</th>
            <th>Event Type</th>
            <th>Object ID</th>
            <th>&nbsp;</th>
        </tr>
        </thead>
        <tbody>
        <f:be.widget.paginate objects="{events}" as="paginatedEvents" configuration="{itemsPerPage: 100}">
            <f:for each="{paginatedEvents}" as="event">
                <tr>
                    <td>{event.eventId}</td>
                    <td>
                        <f:format.date format="H:i:s d.m.Y">{event.crdate}</f:format.date>
                    </td>
                    <td>
                        <f:format.date format="H:i:s d.m.Y">{event.tstamp}</f:format.date>
                    </td>
                    <td>{event.module.connectorName}</td>
                    <td>{event.status}</td>
                    <td>{event.eventType}</td>
                    <td>{event.objectId}</td>
                    <td nowrap="nowrap" class="col-control">

                        <div class="btn-group" role="group">
                            <f:link.action
                                action="reset"
                                arguments="{event: event}"
                                class="btn btn-default" title="Reset event">
                                <span class="text-danger">
                                    <core:icon identifier="actions-refresh"
                                               alternativeMarkupIdentifier="inline"/>
                                </span>
                            </f:link.action>
                            <f:link.action
                                action="check"
                                arguments="{event: event}"
                                class="btn btn-default" title="View event details">
                                <core:icon identifier="actions-document-info"
                                           alternativeMarkupIdentifier="inline"/>
                            </f:link.action>
                        </div>

                    </td>
                </tr>
            </f:for>
        </f:be.widget.paginate>
        </tbody>
    </table>
</f:section>
